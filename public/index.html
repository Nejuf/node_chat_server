<!DOCTYPE html>
</html>

<head>
<title>Chat</title>
<script src="http://code.jquery.com/jquery-1.10.1.min.js" type="text/javascript"></script>
<script src="/javascripts/WebSocketIO.js" type="text/javascript"></script>
</head>

<body>
<h1>Welcome to Chat!</h1>
<div class="chat-ui">
	<ul class="chat-messages">
	</ul>
	<form class="chat-form" action="#form" method="POST">
		<input class="chat-input" type="textarea"></input>
		<input type="submit" value="Send">
	</form>
</div>
<script>
	var socket = WebSocketIO.createSocket(location.hostname, 8000, $('ul.chat-messages'));

	$('.chat-form').submit(function(event){
		event.preventDefault();
		console.log($(event.currentTarget).find('.chat-input').val());
		
		var msg = $(event.currentTarget).find('.chat-input').val();
		socket.emit(msg);
		$(event.currentTarget).find('.chat-input').val("");
	});
</script>
</body>

</html>